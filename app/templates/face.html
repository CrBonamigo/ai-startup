{% extends "layout.html" %}
{% block content %}
<style>
.column {
  float: left;
  width: 50%;
  padding: 1px;
}
</style>

 <center> <h2><font color='white'>Upload your image for model detect faces and classifier gender and emotion.</font></h2>
 <div class="row">
 <div class="column">
 <img width="60%" src="../static/img/test_image.jpg">
 </div>
 <div class="column">
 <img width="60%" src="../static/img/predicted_test_image.png">
 </div>
  </div>
 {% if current_user.is_authenticated %}
  <h2><font color='white'>Upload your image below</font></h2>

  <form action = "http://localhost:5000/uploaded" method = "POST"
         enctype = "multipart/form-data">
         <input type = "file" name = "photo" style="background-color:#3b83c0;"/>
         <input type = "submit"/>
      </form>
	  
	  <div style="padding:2%; color:white" id="paypal-button"><h2>Want to buy the model? Click the button below and we will send it to you!</h2></div>
	  {% else %}
	  
	  <h2><font color='white'>Sigin for upload</font></h2>
	  </center>
	  {% endif %}

<script src="https://www.paypalobjects.com/api/checkout.js"></script>

<script>
    var CREATE_PAYMENT_URL  = 'http://localhost:5000/user/payment';
    var EXECUTE_PAYMENT_URL = 'http://localhost:5000/user/execute';

    paypal.Button.render({
	
	style: {
		 layout: 'horizontal',
		 fundingicons: 'true',
		},

        env: 'sandbox', // 'production' Or 'sandbox'

        commit: true, // Show a 'Pay Now' button

        payment: function() {
            return paypal.request.post(CREATE_PAYMENT_URL).then(function(data) {
                return data.paymentID;
            });
        },

        onAuthorize: function(data) {
            return paypal.request.post(EXECUTE_PAYMENT_URL, {
                paymentID: data.paymentID,
                payerID:   data.payerID
            }).then(function(res) {

                console.log(res.success)
                // The payment is complete!
                // You can now show a confirmation message to the customer
            });
        }

    }, '#paypal-button');
</script>
{% endblock %}